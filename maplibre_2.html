<!DOCTYPE html>
<html lang="en">
<head>
    <title>Add a GeoJSON polygon</title>
    <meta property="og:description" content="Style a polygon with the fill layer type." />
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@5.17.0/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@5.17.0/dist/maplibre-gl.js'></script>
    <style>
        body { margin: 0; padding: 0; }
        html, body, #map { height: 100%; }
    </style>
</head>
<body>
<div id="map"></div>
<script>
    const map = new maplibregl.Map({
        container: 'map',
        style: 'https://demotiles.maplibre.org/style.json',
        center: [10.89667, 59.90417], // Oslo
        zoom: 12
    });

    // createGrid function (returns GeoJSON FeatureCollection of LineStrings)
    function createGrid(bounds, cellSize) {
      const features = [];
      const minX = bounds.getWest();
      const maxX = bounds.getEast();
      const minY = bounds.getSouth();
      const maxY = bounds.getNorth();

      for (let x = minX; x <= maxX; x += cellSize) {
        features.push({
          type: 'Feature',
          geometry: {
            type: 'LineString',
            coordinates: [
              [x, minY],
              [x, maxY]
            ]
          }
        });
      }

      for (let y = minY; y <= maxY; y += cellSize) {
        features.push({
          type: 'Feature',
          geometry: {
            type: 'LineString',
            coordinates: [
              [minX, y],
              [maxX, y]
            ]
          }
        });
      }

      return { type: 'FeatureCollection', features };
    }

    map.on('load', () => {
        // Add Kartverket N50 raster WMTS as background
        map.addSource('n50', {
            type: 'raster',
            tiles: [
                'https://cache.kartverket.no/v1/wmts/1.0.0/topo/default/webmercator/{z}/{y}/{x}.png'
            ],
            tileSize: 256,
            maxzoom: 19,
            attribution: 'Â© Kartverket'
        });
        // insert n50 as the very first layer so it is the base map
        // const first = map.getStyle && map.getStyle().layers && map.getStyle().layers[0] && map.getStyle().layers[0].id;
map.addLayer({
    id: 'n50',
    type: 'raster',
    source: 'n50',
    paint: {}
  });
        map.addSource('bygninger', {
            'type': 'geojson',
            'data': 'bygninger.geojson'
        });
        map.addSource('andreas', {
            'type': 'geojson',
            'data': 'andreas.geojson'
        });
        map.addSource('maine', {
            'type': 'geojson',
            'data': {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {},
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              10.896630403721216,
              59.90480957675789
            ],
            [
              10.89641568567614,
              59.90480428720212
            ],
            [
              10.896203035686781,
              59.90478846948113
            ],
            [
              10.895994501884536,
              59.90476227594315
            ],
            [
              10.895792092744307,
              59.9047259588704
            ],
            [
              10.895597757734887,
              59.9046798680487
            ],
            [
              10.895413368538408,
              59.90462444739751
            ],
            [
              10.895240701020047,
              59.90456023069323
            ],
            [
              10.895081418121759,
              59.90448783642688
            ],
            [
              10.894937053844968,
              59.9044079618459
            ],
            [
              10.894808998476513,
              59.90432137623717
            ],
            [
              10.894698485200202,
              59.90422891351651
            ],
            [
              10.894606578222865,
              59.90413146419572
            ],
            [
              10.894534162529151,
              59.90402996680465
            ],
            [
              10.894481935363663,
              59.90392539885121
            ],
            [
              10.894450399522151,
              59.903818767406094
            ],
            [
              10.894439858516279,
              59.90371109940331
            ],
            [
              10.894450413658134,
              59.90360343174961
            ],
            [
              10.894481963092387,
              59.903496801338335
            ],
            [
              10.89453420278502,
              59.90339223506373
            ],
            [
              10.894606629458865,
              59.903290739932004
            ],
            [
              10.894698545447367,
              59.90319329336422
            ],
            [
              10.894809065419578,
              59.90310083378448
            ],
            [
              10.894937124911346,
              59.903014251583805
            ],
            [
              10.895081490580408,
              59.902934380547094
            ],
            [
              10.89524077208642,
              59.902861989825034
            ],
            [
              10.89541343548147,
              59.902797776528814
            ],
            [
              10.895597817982052,
              59.90274235901852
            ],
            [
              10.895792143980312,
              59.90269627094985
            ],
            [
              10.895994542140405,
              59.90265995613646
            ],
            [
              10.896203063415507,
              59.90263376427731
            ],
            [
              10.896415699812122,
              59.90261794759014
            ],
            [
              10.896630403721216,
              59.902612658383454
            ],
            [
              10.896845107630314,
              59.90261794759014
            ],
            [
              10.897057744026927,
              59.90263376427731
            ],
            [
              10.897266265302031,
              59.90265995613646
            ],
            [
              10.897468663462124,
              59.90269627094985
            ],
            [
              10.897662989460382,
              59.90274235901852
            ],
            [
              10.897847371960964,
              59.902797776528814
            ],
            [
              10.898020035356014,
              59.902861989825034
            ],
            [
              10.898179316862027,
              59.902934380547094
            ],
            [
              10.898323682531089,
              59.903014251583805
            ],
            [
              10.898451742022857,
              59.90310083378448
            ],
            [
              10.89856226199507,
              59.90319329336422
            ],
            [
              10.89865417798357,
              59.903290739932004
            ],
            [
              10.898726604657416,
              59.90339223506373
            ],
            [
              10.898778844350048,
              59.903496801338335
            ],
            [
              10.8988103937843,
              59.90360343174961
            ],
            [
              10.898820948926156,
              59.90371109940331
            ],
            [
              10.898810407920282,
              59.903818767406094
            ],
            [
              10.898778872078774,
              59.90392539885121
            ],
            [
              10.898726644913284,
              59.90402996680465
            ],
            [
              10.898654229219572,
              59.90413146419572
            ],
            [
              10.898562322242233,
              59.90422891351651
            ],
            [
              10.898451808965921,
              59.90432137623717
            ],
            [
              10.898323753597467,
              59.9044079618459
            ],
            [
              10.898179389320676,
              59.90448783642688
            ],
            [
              10.89802010642239,
              59.90456023069323
            ],
            [
              10.897847438904028,
              59.90462444739751
            ],
            [
              10.89766304970755,
              59.9046798680487
            ],
            [
              10.897468714698128,
              59.9047259588704
            ],
            [
              10.8972663055579,
              59.90476227594315
            ],
            [
              10.897057771755653,
              59.90478846948113
            ],
            [
              10.896845121766297,
              59.90480428720212
            ],
            [
              10.896630403721216,
              59.90480957675789
            ]
          ]
        ]
      }
    }
  ]
}

        });
        map.addLayer({
            'id': 'maine',
            'type': 'fill',
            'source': 'maine',
            'layout': {},
            'paint': {
                'fill-color': '#088',
                'fill-opacity': 0.8
            }
        });
        map.addLayer({
            'id': 'andreas',
            'type': 'line',
            'source': 'andreas',
            'layout': {},
            'paint': {
                'line-width': 2,
                'line-color': 'darkblue',
                'line-opacity': 1
            }
        });
        map.addLayer({
            'id': 'bygninger',
            'type': 'fill',
            'source': 'bygninger',
            'layout': {},
            'paint': {
                'fill-color': 'blue',
                'fill-opacity': 0.8
            }
        });
        map.addSource('grid', {
          'type': 'geojson',
          'data': createGrid(map.getBounds(), 0.001)
        });
        map.addLayer({
          'id': 'grid',
          'type': 'line',
          'source': 'grid',
          'layout': {},
          'paint': {
            'line-color': 'red',
            'line-width': 1
          }
        });
    });
</script>
</body>
</html>